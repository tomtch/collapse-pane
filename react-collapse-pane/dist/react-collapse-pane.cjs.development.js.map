{"version":3,"file":"react-collapse-pane.cjs.development.js","sources":["../src/hooks/useMergeClasses.ts","../src/components/Pane/index.tsx","../src/components/Resizer/helpers.tsx","../src/components/Resizer/hooks/useTransition.ts","../src/components/SplitPane/helpers.tsx","../src/components/Resizer/index.tsx","../src/hooks/useEventListener.ts","../src/components/SplitPane/hooks/effects/useDragState.ts","../src/components/SplitPane/hooks/memos/useMinSizes.ts","../src/components/SplitPane/hooks/callbacks/useGetMovedSizes.ts","../src/components/SplitPane/hooks/memos/useIsCollapseReversed.ts","../src/components/SplitPane/hooks/callbacks/useHandleDragFinished.ts","../src/components/SplitPane/hooks/callbacks/useHandleDragStart.ts","../src/components/SplitPane/hooks/memos/useChildPanes.ts","../src/components/SplitPane/hooks/callbacks/useGetCurrentPaneSizes.ts","../src/components/SplitPane/hooks/callbacks/useCollapseSize.ts","../src/components/SplitPane/hooks/callbacks/useUncollapseSize.ts","../src/components/SplitPane/hooks/callbacks/useUpdateCollapsedSizes.ts","../src/components/SplitPane/hooks/memos/useCollapsedSize.ts","../src/components/SplitPane/hooks/callbacks/useRecalculateSizes.ts","../src/components/SplitPane/hooks/useSplitPaneResize.ts","../src/components/SplitPane/hooks/callbacks/useToggleCollapse.ts","../src/components/SplitPane/hooks/callbacks/useGetIsCollapsed.ts","../src/components/SplitPane/hooks/memos/useIsLtr.ts","../src/components/SplitPane/hooks/memos/useCollapsedSizes.ts","../src/components/CollapseButton.tsx","../src/components/SplitPane/hooks/memos/useCollapseOptions.tsx","../src/components/SplitPane/index.tsx"],"sourcesContent":["import { useMemo } from 'react';\r\n\r\nexport const useMergeClasses = (classes: (string | undefined)[]): string =>\r\n  useMemo(() => classes.filter(c => c).join(' '), [classes]);\r\n","import * as React from 'react';\r\nimport { useMergeClasses } from '../../hooks/useMergeClasses';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { SplitType } from '../SplitPane';\r\n\r\nconst DEFAULT_COLLAPSE_TRANSITION_TIMEOUT = 500;\r\nconst verticalCss = css`\r\n  width: 0;\r\n  height: 100%;\r\n`;\r\nconst horizontalCss = css`\r\n  width: 100%;\r\n  height: 0;\r\n`;\r\nconst coverCss = css`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\n\r\ninterface PaneRootProps {\r\n  $isVertical: boolean;\r\n  $shouldAnimate: boolean;\r\n  $timeout: number;\r\n}\r\nconst PaneRoot = styled.div<PaneRootProps>`\r\n  position: relative;\r\n  outline: none;\r\n  border: 0;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-grow: 1;\r\n  flex-shrink: 1;\r\n  ${props => (props.$isVertical ? verticalCss : horizontalCss)}\r\n  ${props => props.$shouldAnimate && `transition: flex-basis ${props.$timeout}ms ease-in-out`}\r\n`;\r\nconst WidthPreserver = styled.div<{ $isCollapsed: boolean }>`\r\n  ${coverCss}\r\n  ${props =>\r\n    props.$isCollapsed &&\r\n    css`\r\n      * {\r\n        z-index: 0;\r\n      }\r\n      z-index: 0;\r\n    `}\r\n`;\r\n\r\nconst CollapseOverlay = styled.div<{ $timeout: number; $isCollapsed: boolean }>`\r\n  ${props => props.$isCollapsed && coverCss}\r\n  ${props =>\r\n    props.$isCollapsed &&\r\n    css`\r\n      z-index: 1;\r\n    `};\r\n  opacity: ${props => (props.$isCollapsed ? 1 : 0)};\r\n  transition: opacity ${props => props.$timeout}ms ease-in-out;\r\n`;\r\n\r\nexport interface PaneProps {\r\n  size: number;\r\n  minSize: number;\r\n  isVertical: boolean;\r\n  split: SplitType;\r\n  className?: string;\r\n  isCollapsed: boolean;\r\n  forwardRef: React.Ref<HTMLDivElement>;\r\n  collapseOverlayCss?: React.CSSProperties;\r\n  collapsedIndices: number[];\r\n  children: React.ReactNode;\r\n  transitionTimeout: number | undefined;\r\n}\r\nconst UnMemoizedPane = ({\r\n  size,\r\n  minSize,\r\n  isCollapsed,\r\n  collapseOverlayCss = { background: 'rgba(220,220,220, 0.1)' },\r\n  isVertical,\r\n  split,\r\n  className,\r\n  children,\r\n  forwardRef,\r\n  collapsedIndices,\r\n  transitionTimeout,\r\n}: PaneProps) => {\r\n  const classes = useMergeClasses(['Pane', split, className]);\r\n  const timeout = useMemo(() => transitionTimeout ?? DEFAULT_COLLAPSE_TRANSITION_TIMEOUT, [\r\n    transitionTimeout,\r\n  ]);\r\n  const [shouldAnimate, setShouldAnimate] = useState(false);\r\n\r\n  const didMount = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (didMount.current) {\r\n      if (timeout !== 0) {\r\n        setShouldAnimate(true);\r\n        setTimeout(() => setShouldAnimate(false), 500);\r\n      }\r\n    } else {\r\n      didMount.current = true;\r\n    }\r\n  }, [setShouldAnimate, collapsedIndices, timeout]);\r\n\r\n  const minStyle = useMemo(() => (isVertical ? { minWidth: minSize } : { minHeight: minSize }), [\r\n    minSize,\r\n    isVertical,\r\n  ]);\r\n  const widthPreserverStyle: React.CSSProperties = isCollapsed\r\n    ? { ...minStyle, userSelect: 'none' }\r\n    : minStyle;\r\n  return (\r\n    <PaneRoot\r\n      $isVertical={isVertical}\r\n      $shouldAnimate={timeout !== 0 && shouldAnimate}\r\n      $timeout={timeout}\r\n      className={classes}\r\n      ref={forwardRef}\r\n      style={{ flexBasis: size }}\r\n    >\r\n      <CollapseOverlay $isCollapsed={isCollapsed} $timeout={timeout} style={collapseOverlayCss} />\r\n      <WidthPreserver $isCollapsed={isCollapsed} style={widthPreserverStyle}>\r\n        {children}\r\n      </WidthPreserver>\r\n    </PaneRoot>\r\n  );\r\n};\r\n\r\nUnMemoizedPane.displayName = 'Pane';\r\nexport const Pane = React.memo(UnMemoizedPane);\r\n","import styled, { css } from 'styled-components';\r\n\r\ntype OrientationProps = {\r\n  $isVertical: boolean;\r\n};\r\nexport const topBottomCss = css`\r\n  top: 0;\r\n  bottom: 0;\r\n`;\r\nconst leftRightCss = css`\r\n  right: 0;\r\n  left: 0;\r\n`;\r\n\r\nexport const ButtonWrapper = styled.div<OrientationProps>`\r\n  cursor: pointer;\r\n  position: absolute;\r\n`;\r\n\r\ninterface ButtonContainerProps extends OrientationProps {\r\n  $grabberSize: string | null;\r\n  $isLtr: boolean;\r\n}\r\nexport const ButtonContainer = styled.div<ButtonContainerProps>`\r\n  z-index: 3;\r\n  position: absolute;\r\n  overflow: initial;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  ${props => `${props.$isVertical ? 'width' : 'height'}: ${props.$grabberSize}`};\r\n  ${props => (props.$isVertical ? topBottomCss : leftRightCss)}\r\n`;\r\n\r\ninterface GrabberProps extends OrientationProps {\r\n  $isCollapsed: boolean;\r\n  $isLtr: boolean;\r\n}\r\nexport const ResizeGrabber = styled.div<GrabberProps>`\r\n  position: absolute;\r\n  z-index: 3;\r\n  transform: ${props =>\r\n    props.$isVertical ? `translateX(${props.$isLtr ? '-' : ''}50%)` : 'translateY(-50%)'};\r\n  cursor: ${props => !props.$isCollapsed && (props.$isVertical ? 'col-resize' : 'row-resize')};\r\n  ${props => (props.$isVertical ? topBottomCss : leftRightCss)}\r\n`;\r\n\r\nexport const ResizePresentation = styled.div<OrientationProps>`\r\n  z-index: 2;\r\n  position: absolute;\r\n  ${props => (props.$isVertical ? topBottomCss : leftRightCss)}\r\n`;\r\n\r\nexport const getSizeWithUnit = (size: string | number): string =>\r\n  isNaN(size as number) ? size.toString() : `${size}px`;\r\n","import { CollapseOptions, TransitionType } from '../../SplitPane';\nimport { useMemo } from 'react';\nimport { Fade, Grow, Zoom } from '@material-ui/core';\ntype TransitionComponent = typeof Fade | typeof Grow | typeof Zoom;\nconst transitionComponentMap: {\n  [key in TransitionType]: TransitionComponent;\n} = {\n  fade: Fade,\n  grow: Grow,\n  zoom: Zoom,\n  none: Fade,\n};\n\nexport const useTransition = (collapseOptions?: CollapseOptions) =>\n  useMemo(() => transitionComponentMap[collapseOptions?.buttonTransition ?? 'fade'], [\n    collapseOptions,\n  ]);\n","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { SplitType } from '.';\r\nimport { Nullable } from '../../types/utilities';\r\n\r\nexport const DEFAULT_MIN_SIZE = 50;\r\n\r\nexport const getMinSize = (index: number, minSizes?: number | number[]): number => {\r\n  if (typeof minSizes === 'number') {\r\n    if (minSizes > 0) {\r\n      return minSizes;\r\n    }\r\n  } else if (minSizes instanceof Array) {\r\n    const value = minSizes[index];\r\n    if (value > 0) {\r\n      return value;\r\n    }\r\n  }\r\n  return DEFAULT_MIN_SIZE;\r\n};\r\n\r\nexport const getRefSize = ({\r\n  ref,\r\n  split,\r\n}: {\r\n  split: SplitType;\r\n  ref: React.RefObject<HTMLDivElement>;\r\n}) => {\r\n  const sizeAttr = split === 'vertical' ? 'width' : 'height';\r\n  return ref.current?.getBoundingClientRect()[sizeAttr] ?? 0;\r\n};\r\n\r\nexport type MoveDetails = {\r\n  sizes: number[];\r\n  index: number;\r\n  offset: number;\r\n  minSizes: number[];\r\n  collapsedIndices: number[];\r\n  collapsedSize: number;\r\n};\r\n/**\r\n * Mutates the original array in a recursive fashion, identifying the current sizes, whether they need to be changed, and whether they need to push the next or previous pane.\r\n */\r\nexport const moveSizes = ({\r\n  index,\r\n  minSizes,\r\n  offset,\r\n  sizes,\r\n  collapsedIndices,\r\n  collapsedSize,\r\n}: MoveDetails): number => {\r\n  //recursion break points\r\n  if (!offset || index < 0 || index + 1 >= sizes.length) {\r\n    return 0;\r\n  }\r\n  const isCollapsed = (idx: number) => collapsedIndices.includes(idx);\r\n  const firstMinSize = isCollapsed(index) ? collapsedSize : getMinSize(index, minSizes);\r\n  const secondMinSize = isCollapsed(index + 1) ? collapsedSize : getMinSize(index + 1, minSizes);\r\n  const firstSize = sizes[index] + offset;\r\n  const secondSize = sizes[index + 1] - offset;\r\n\r\n  if (offset < 0 && firstSize < firstMinSize) {\r\n    const missing = firstSize - firstMinSize;\r\n    const pushedOffset = moveSizes({\r\n      sizes,\r\n      index: index - 1,\r\n      offset: missing,\r\n      minSizes,\r\n      collapsedIndices,\r\n      collapsedSize,\r\n    });\r\n\r\n    offset -= missing - pushedOffset;\r\n  } else if (offset > 0 && secondSize < secondMinSize) {\r\n    const missing = secondMinSize - secondSize;\r\n    const pushedOffset = moveSizes({\r\n      sizes,\r\n      index: index + 1,\r\n      offset: missing,\r\n      minSizes,\r\n      collapsedIndices,\r\n      collapsedSize,\r\n    });\r\n\r\n    offset -= missing - pushedOffset;\r\n  }\r\n  sizes[index] += offset;\r\n  sizes[index + 1] -= offset;\r\n\r\n  return offset;\r\n};\r\n\r\ninterface MoveCollapsedDetails {\r\n  offset: number;\r\n  isReversed: boolean;\r\n  index: number;\r\n  sizes: number[];\r\n  collapsedIndices: number[];\r\n  minSizes: number[];\r\n  collapsedSize: number;\r\n}\r\n/**\r\n * This is only used when a collapse action is invoked.  It's meant to move any collapsed siblings along with the move.\r\n */\r\nexport const moveCollapsedSiblings = ({\r\n  offset,\r\n  isReversed,\r\n  collapsedIndices,\r\n  minSizes,\r\n  sizes,\r\n  index,\r\n  collapsedSize,\r\n}: MoveCollapsedDetails) => {\r\n  if (isReversed ? offset > 0 : offset < 0) {\r\n    for (\r\n      let i = isReversed ? index : index + 1;\r\n      isReversed ? i > 0 : i < sizes.length - 1;\r\n      isReversed ? i-- : i++\r\n    ) {\r\n      if (collapsedIndices.includes(i)) {\r\n        moveSizes({\r\n          sizes,\r\n          index: isReversed ? i - 1 : i,\r\n          offset,\r\n          minSizes,\r\n          collapsedIndices,\r\n          collapsedSize,\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst verticalCss = css`\r\n  left: 0;\r\n  right: 0;\r\n  flex-direction: row;\r\n`;\r\nconst horizontalCss = css`\r\n  bottom: 0;\r\n  top: 0;\r\n  flex-direction: column;\r\n  min-height: 100%;\r\n  width: 100%;\r\n`;\r\nexport const Wrapper = styled.div<{ split: SplitType }>`\r\n  display: flex;\r\n  flex: 1;\r\n  height: 100%;\r\n  position: absolute;\r\n  outline: none;\r\n  overflow: hidden;\r\n  ${props => (props.split === 'vertical' ? verticalCss : horizontalCss)}\r\n`;\r\n\r\n/**\r\n * Infers the indices of the collapsed panels from an array of nullable collapse sizes.  If the index is null then it's not collapsed.\r\n */\r\nexport const convertCollapseSizesToIndices = (sizes?: Nullable<number>[]) =>\r\n  sizes?.reduce((prev, cur, idx) => (cur !== null ? [...prev, idx] : [...prev]), [] as number[]) ??\r\n  [];\r\n\r\nexport const addArray = (arr: number[]) => arr.reduce((prev, cur) => prev + cur, 0);\r\n\r\n/**\r\n * Returns a debounced version of a function. Similar to lodash's _.debounce\r\n * @param func the function to be debounced\r\n * @param waitFor the amount of time that must elapse before the debounce expires and the callback is called.\r\n */\r\nexport const debounce = <F extends (...args: any[]) => any>(func: F, waitFor: number) => {\r\n  let timeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const debounced = (...args: Parameters<F>) => {\r\n    if (timeout !== null) {\r\n      clearTimeout(timeout);\r\n      timeout = null;\r\n    }\r\n    timeout = setTimeout(() => func(...args), waitFor);\r\n  };\r\n\r\n  return debounced as (...args: Parameters<F>) => ReturnType<F>;\r\n};\r\n","import React, { useCallback, useMemo, useState } from 'react';\r\nimport { Fade } from '@material-ui/core';\r\nimport { BeginDragCallback } from '../SplitPane/hooks/effects/useDragState';\r\nimport {\r\n  ButtonContainer,\r\n  ButtonWrapper,\r\n  getSizeWithUnit,\r\n  ResizeGrabber,\r\n  ResizePresentation,\r\n} from './helpers';\r\nimport { useMergeClasses } from '../../hooks/useMergeClasses';\r\nimport { CollapseOptions, ResizerOptions } from '../SplitPane';\r\nimport { useTransition } from './hooks/useTransition';\r\nimport { SplitType } from '../SplitPane';\r\nimport { debounce } from '../SplitPane/helpers';\r\n\r\nconst defaultResizerOptions: Required<ResizerOptions> = {\r\n  grabberSize: '1rem',\r\n  css: { backgroundColor: 'rgba(120, 120, 120, 0.3)' },\r\n  hoverCss: { backgroundColor: 'rgba(120, 120, 120, 0.6)' },\r\n};\r\n\r\nexport interface ResizerProps {\r\n  isVertical: boolean;\r\n  isLtr: boolean;\r\n  split: SplitType;\r\n  className?: string;\r\n  paneIndex: number;\r\n  collapseOptions?: CollapseOptions;\r\n  resizerOptions?: Partial<ResizerOptions>;\r\n  onDragStarted: BeginDragCallback;\r\n  onCollapseToggle: (paneIndex: number) => void;\r\n  isCollapsed: boolean;\r\n}\r\nexport const Resizer = ({\r\n  isVertical,\r\n  split,\r\n  className,\r\n  paneIndex,\r\n  onDragStarted,\r\n  resizerOptions,\r\n  collapseOptions,\r\n  onCollapseToggle,\r\n  isLtr,\r\n  isCollapsed,\r\n}: ResizerProps) => {\r\n  const { grabberSize, css, hoverCss } = { ...defaultResizerOptions, ...resizerOptions };\r\n\r\n  const classes = useMergeClasses(['Resizer', split, className]);\r\n  const grabberSizeWithUnit = useMemo(() => getSizeWithUnit(grabberSize), [grabberSize]);\r\n  const Transition = useTransition(collapseOptions);\r\n\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  const handleMouseDown = useCallback(\r\n    (event: React.MouseEvent) => {\r\n      event.preventDefault();\r\n      if (!isCollapsed) {\r\n        onDragStarted({ index: paneIndex, position: event });\r\n      }\r\n    },\r\n    [paneIndex, isCollapsed, onDragStarted]\r\n  );\r\n  const handleTouchStart = useCallback(\r\n    (event: React.TouchEvent) => {\r\n      event.preventDefault();\r\n      if (!isCollapsed) {\r\n        onDragStarted({ index: paneIndex, position: event.touches[0] });\r\n      }\r\n    },\r\n    [paneIndex, isCollapsed, onDragStarted]\r\n  );\r\n  const handleButtonClick = useCallback(\r\n    (event: React.MouseEvent) => {\r\n      event.stopPropagation();\r\n      onCollapseToggle(paneIndex);\r\n    },\r\n    [paneIndex, onCollapseToggle]\r\n  );\r\n  const handleButtonMousedown = useCallback((event: React.MouseEvent) => {\r\n    event.stopPropagation();\r\n  }, []);\r\n\r\n  const debouncedSetHovered = useCallback(\r\n    debounce(() => setIsHovered(true), 50),\r\n    [setIsHovered]\r\n  );\r\n  const handleMouseEnterGrabber = useCallback(() => {\r\n    debouncedSetHovered();\r\n  }, [debouncedSetHovered]);\r\n\r\n  const debouncedSetNotHovered = useCallback(\r\n    debounce(() => setIsHovered(false), 100),\r\n    [setIsHovered]\r\n  );\r\n  const handleMouseLeaveGrabber = useCallback(() => debouncedSetNotHovered(), [\r\n    debouncedSetNotHovered,\r\n  ]);\r\n\r\n  const getWidthOrHeight = useCallback(\r\n    (size: string | number) => (isVertical ? { width: size } : { height: size }),\r\n    [isVertical]\r\n  );\r\n  const preButtonFlex = useMemo(\r\n    () => Math.max(100 - (collapseOptions?.buttonPositionOffset ?? 0), 0),\r\n    [collapseOptions]\r\n  );\r\n  const postButtonFlex = useMemo(\r\n    () => Math.max(100 + (collapseOptions?.buttonPositionOffset ?? 0), 0),\r\n    [collapseOptions]\r\n  );\r\n  const isTransition = collapseOptions?.buttonTransition !== 'none';\r\n  const collapseButton = collapseOptions ? (\r\n    <ButtonContainer $isVertical={isVertical} $grabberSize={grabberSizeWithUnit} $isLtr={isLtr}>\r\n      <div style={{ flex: `1 1 ${preButtonFlex}` }} />\r\n      <Transition\r\n        in={isTransition ? isHovered : true}\r\n        timeout={isTransition ? collapseOptions.buttonTransitionTimeout : 0}\r\n        style={{ flex: '0 0 0', position: 'relative' }}\r\n      >\r\n        <ButtonWrapper\r\n          $isVertical={isVertical}\r\n          onClick={handleButtonClick}\r\n          onMouseDown={handleButtonMousedown}\r\n        >\r\n          {isCollapsed ? collapseOptions.afterToggleButton : collapseOptions.beforeToggleButton}\r\n        </ButtonWrapper>\r\n      </Transition>\r\n      <div style={{ flex: `1 1 ${postButtonFlex}` }} />\r\n    </ButtonContainer>\r\n  ) : null;\r\n\r\n  return (\r\n    <div key=\"grabber.root\" style={{ position: 'relative' }}>\r\n      <ResizeGrabber\r\n        key=\"grabber\"\r\n        $isVertical={isVertical}\r\n        $isCollapsed={isCollapsed}\r\n        $isLtr={isLtr}\r\n        style={getWidthOrHeight(grabberSize)}\r\n        role=\"presentation\"\r\n        className={classes}\r\n        onMouseDown={handleMouseDown}\r\n        onTouchStart={handleTouchStart}\r\n        onMouseEnter={handleMouseEnterGrabber}\r\n        onMouseLeave={handleMouseLeaveGrabber}\r\n      >\r\n        {collapseButton}\r\n      </ResizeGrabber>\r\n      <Fade key=\"resize.presentation.fadein\" in={!isHovered}>\r\n        <ResizePresentation $isVertical={isVertical} style={{ ...getWidthOrHeight(1), ...css }} />\r\n      </Fade>\r\n      <Fade key=\"resize.presentation.fadeout\" in={isHovered}>\r\n        <ResizePresentation\r\n          $isVertical={isVertical}\r\n          style={{ ...getWidthOrHeight(1), ...hoverCss }}\r\n        />\r\n      </Fade>\r\n    </div>\r\n  );\r\n};\r\nResizer.displayName = 'Resizer';\r\n","import { useEffect } from 'react';\n\nexport const useEventListener = <K extends keyof WindowEventMap>(\n  type: K,\n  listener?: (this: Window, ev: WindowEventMap[K]) => void\n): void =>\n  useEffect(() => {\n    const abortController = new AbortController();\n    if (!listener) return;\n    window.addEventListener(type, listener);\n    return (): void => {\n      window.removeEventListener(type, listener);\n      abortController.abort();\n    };\n  }, [type, listener]);\n","import * as ReactDOM from 'react-dom';\r\nimport { useEventListener } from '../../../../hooks/useEventListener';\r\nimport { useCallback, useMemo, useState } from 'react';\r\n\r\nexport interface ClientPosition {\r\n  clientX: number;\r\n  clientY: number;\r\n}\r\n\r\nexport interface DragState {\r\n  offset: number;\r\n  index: number;\r\n}\r\nexport type BeginDragCallback = (props: { position: ClientPosition; index: number }) => void;\r\ninterface DragStateHandlers {\r\n  beginDrag: BeginDragCallback;\r\n  dragState: DragState | null;\r\n  onMouseMove?: (event: ClientPosition) => void;\r\n  onTouchMove?: (event: TouchEvent) => void;\r\n  onMouseUp?: () => void;\r\n  onMouseEnter?: (event: MouseEvent) => void;\r\n}\r\n\r\nconst useDragStateHandlers = (\r\n  isVertical: boolean,\r\n  onDragFinished: (dragState: DragState) => void\r\n): DragStateHandlers => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStartPos, setDragStartPos] = useState<number | null>(null);\r\n  const [currentPos, setCurrentPos] = useState<number | null>(null);\r\n  const [draggingIndex, setDraggingIndex] = useState<number | null>(null);\r\n\r\n  const beginDrag: BeginDragCallback = useCallback(\r\n    ({ position, index }: { position: ClientPosition; index: number }): void => {\r\n      const pos = isVertical ? position.clientX : position.clientY;\r\n      ReactDOM.unstable_batchedUpdates(() => {\r\n        setDraggingIndex(index);\r\n        setIsDragging(true);\r\n        setDragStartPos(pos);\r\n        setCurrentPos(pos);\r\n      });\r\n    },\r\n    [isVertical]\r\n  );\r\n\r\n  const dragState: DragState | null = useMemo(() => {\r\n    if (isDragging && currentPos !== null && dragStartPos !== null && draggingIndex !== null) {\r\n      const offset = currentPos - dragStartPos;\r\n      return { offset, index: draggingIndex };\r\n    } else return null;\r\n  }, [currentPos, dragStartPos, draggingIndex, isDragging]);\r\n\r\n  const onMouseUp = useCallback((): void => {\r\n    if (isDragging && dragState) {\r\n      ReactDOM.unstable_batchedUpdates(() => {\r\n        setIsDragging(false);\r\n        onDragFinished(dragState);\r\n      });\r\n    }\r\n  }, [isDragging, dragState, onDragFinished]);\r\n\r\n  const onMouseMove = useCallback(\r\n    (event: ClientPosition): void => {\r\n      if (isDragging) {\r\n        const pos = isVertical ? event.clientX : event.clientY;\r\n        setCurrentPos(pos);\r\n      } else setCurrentPos(null);\r\n    },\r\n    [isDragging, isVertical]\r\n  );\r\n\r\n  const onTouchMove = useCallback(\r\n    (event: TouchEvent): void => {\r\n      if (isDragging) {\r\n        onMouseMove(event.touches[0]);\r\n      }\r\n    },\r\n    [isDragging, onMouseMove]\r\n  );\r\n  const onMouseEnter = useCallback(\r\n    (event: MouseEvent): void => {\r\n      if (isDragging) {\r\n        const isPrimaryPressed = (event.buttons & 1) === 1;\r\n        if (!isPrimaryPressed) {\r\n          onMouseUp();\r\n        }\r\n      }\r\n    },\r\n    [isDragging, onMouseUp]\r\n  );\r\n\r\n  return { beginDrag, dragState, onMouseMove, onTouchMove, onMouseUp, onMouseEnter };\r\n};\r\n\r\ninterface UseDragStateReturn {\r\n  dragState: DragState | null;\r\n  beginDrag: BeginDragCallback;\r\n}\r\nexport const useDragState = (\r\n  isVertical: boolean,\r\n  onDragFinished: (dragState: DragState) => void\r\n): UseDragStateReturn => {\r\n  const {\r\n    beginDrag,\r\n    dragState,\r\n    onMouseMove,\r\n    onTouchMove,\r\n    onMouseUp,\r\n    onMouseEnter,\r\n  } = useDragStateHandlers(isVertical, onDragFinished);\r\n\r\n  useEventListener('mousemove', onMouseMove);\r\n  useEventListener('touchmove', onTouchMove);\r\n  useEventListener('mouseup', onMouseUp);\r\n  useEventListener('mouseenter', onMouseEnter);\r\n\r\n  return { dragState, beginDrag };\r\n};\r\n","import { useMemo } from 'react';\r\nimport { DEFAULT_MIN_SIZE, getMinSize } from '../../helpers';\r\nimport { CollapseOptions } from '../../index';\r\n\r\n/**\r\n * Returns the current actual minimum size of the panel.  This in some cases means the collapsed size.\r\n */\r\nexport const useMinSizes = ({\r\n  minSizes,\r\n  numSizes,\r\n  collapsedIndices,\r\n  collapseOptions,\r\n}: {\r\n  numSizes: number;\r\n  minSizes?: number | number[];\r\n  collapsedIndices: number[];\r\n  collapseOptions?: CollapseOptions;\r\n}): number[] =>\r\n  useMemo(\r\n    () =>\r\n      Array.from({ length: numSizes }).map((_child, idx) =>\r\n        collapsedIndices.includes(idx)\r\n          ? collapseOptions?.collapsedSize ?? DEFAULT_MIN_SIZE\r\n          : getMinSize(idx, minSizes)\r\n      ),\r\n    [numSizes, collapseOptions, collapsedIndices, minSizes]\r\n  );\r\n","import { useCallback } from 'react';\r\nimport { DragState } from '../effects/useDragState';\r\nimport { moveCollapsedSiblings, moveSizes } from '../../helpers';\r\n\r\nexport const useGetMovedSizes = ({\r\n  sizes: originalSizes,\r\n  isLtr,\r\n  minSizes,\r\n  collapsedIndices,\r\n  isReversed,\r\n  collapsedSize,\r\n}: {\r\n  sizes: number[];\r\n  isLtr: boolean;\r\n  minSizes: number[];\r\n  collapsedIndices: number[];\r\n  isReversed: boolean;\r\n  collapsedSize: number;\r\n}) =>\r\n  useCallback(\r\n    (dragState: DragState): number[] => {\r\n      const sizes = [...originalSizes];\r\n      const index = dragState.index;\r\n      const offset = isLtr ? dragState.offset : -dragState.offset;\r\n      moveSizes({\r\n        sizes,\r\n        index,\r\n        offset,\r\n        minSizes,\r\n        collapsedIndices,\r\n        collapsedSize,\r\n      });\r\n      moveCollapsedSiblings({\r\n        collapsedSize,\r\n        sizes,\r\n        minSizes,\r\n        collapsedIndices,\r\n        isReversed,\r\n        index,\r\n        offset,\r\n      });\r\n\r\n      return sizes;\r\n    },\r\n    [collapsedIndices, collapsedSize, isLtr, isReversed, minSizes, originalSizes]\r\n  );\r\n","import { useMemo } from 'react';\r\nimport { CollapseOptions } from '../../index';\r\n\r\nexport const isCollapseDirectionReversed = (\r\n  collapseOptions?: Partial<CollapseOptions> | boolean\r\n): boolean => {\r\n  if (typeof collapseOptions === 'boolean') return false;\r\n  return collapseOptions?.collapseDirection\r\n    ? ['right', 'down'].includes(collapseOptions.collapseDirection)\r\n    : false;\r\n};\r\n\r\nexport const useIsCollapseReversed = (collapseOptions?: Partial<CollapseOptions> | boolean) =>\r\n  useMemo(() => isCollapseDirectionReversed(collapseOptions), [collapseOptions]);\r\n","import React, { useCallback } from 'react';\r\nimport { SplitPaneHooks } from '../..';\r\n\r\n/**\r\n * called at the end of a drag, sets the final size as well as runs the callback hook\r\n */\r\nexport const useHandleDragFinished = ({\r\n  setSizes,\r\n  hooks,\r\n  movedSizes,\r\n}: {\r\n  children: React.ReactChild[];\r\n  setSizes: React.Dispatch<React.SetStateAction<number[]>>;\r\n  movedSizes: number[];\r\n  hooks?: SplitPaneHooks;\r\n}) =>\r\n  useCallback(() => {\r\n    setSizes(movedSizes);\r\n    hooks?.onSaveSizes?.(movedSizes);\r\n  }, [movedSizes, hooks, setSizes]);\r\n","import { useCallback } from 'react';\r\nimport { BeginDragCallback, ClientPosition } from '../effects/useDragState';\r\nimport { SplitPaneHooks } from '../..';\r\n\r\n/**\r\n * Callback that starts the drag process and called at the beginning of the dragging.\r\n */\r\nexport const useHandleDragStart = ({\r\n  isReversed,\r\n  hooks,\r\n  beginDrag,\r\n}: {\r\n  isReversed: boolean;\r\n  hooks?: SplitPaneHooks;\r\n  beginDrag: BeginDragCallback;\r\n}) =>\r\n  useCallback(\r\n    ({ index, position }: { index: number; position: ClientPosition }): void => {\r\n      hooks?.onDragStarted?.();\r\n      beginDrag({ position, index: isReversed ? index - 1 : index });\r\n    },\r\n    [beginDrag, hooks, isReversed]\r\n  );\r\n","import { useMemo } from 'react';\r\nimport * as React from 'react';\r\nimport { ChildPane } from '../useSplitPaneResize';\r\n\r\n// converts all children nodes into 'childPane' objects that has its ref, key, but not the size yet\r\nexport const useChildPanes = ({\r\n  paneRefs,\r\n  children,\r\n  minSizes,\r\n}: {\r\n  paneRefs: React.MutableRefObject<Map<string, React.RefObject<HTMLDivElement>>>;\r\n  children: React.ReactChild[];\r\n  minSizes: number[];\r\n}) => {\r\n  const childPanes: Omit<ChildPane, 'size'>[] = useMemo(() => {\r\n    const prevPaneRefs = paneRefs.current;\r\n    paneRefs.current = new Map<string, React.RefObject<HTMLDivElement>>();\r\n    return children.map((node, index) => {\r\n      const key = `index.${index}`;\r\n      const ref = prevPaneRefs.get(key) || React.createRef();\r\n      paneRefs.current.set(key, ref);\r\n      return { key, node, ref, minSize: minSizes[index] };\r\n    });\r\n  }, [children, minSizes, paneRefs]);\r\n  return childPanes;\r\n};\r\n","import { useCallback } from 'react';\nimport { getRefSize } from '../../helpers';\nimport { ChildPane } from '../useSplitPaneResize';\nimport { SplitType } from '../..';\n\nexport const useGetCurrentPaneSizes = ({\n  childPanes,\n  split,\n}: {\n  childPanes: Pick<ChildPane, 'ref'>[];\n  split: SplitType;\n}) =>\n  useCallback(() => childPanes.map(({ ref }): number => getRefSize({ split, ref })), [\n    childPanes,\n    split,\n  ]);\n","import React, { useCallback } from 'react';\nimport { moveCollapsedSiblings, moveSizes } from '../../helpers';\nimport * as ReactDOM from 'react-dom';\n\nexport const useCollapseSize = ({\n  isReversed,\n  movedSizes,\n  minSizes,\n  collapsedIndices,\n  setSizes,\n  setMovedSizes,\n  collapsedSize,\n}: {\n  isReversed: boolean;\n  movedSizes: number[];\n  minSizes: number[];\n  collapsedIndices: number[];\n  setSizes: React.Dispatch<React.SetStateAction<number[]>>;\n  setMovedSizes: React.Dispatch<React.SetStateAction<number[]>>;\n  collapsedSize: number;\n}) =>\n  useCallback(\n    ({ size, idx }: { idx: number; size: number }) => {\n      const offset = isReversed ? -(collapsedSize - size) : collapsedSize - size;\n      const index = isReversed ? idx - 1 : idx;\n      const sizes = [...movedSizes];\n      moveSizes({ sizes, index, offset, minSizes, collapsedIndices, collapsedSize });\n      moveCollapsedSiblings({\n        offset,\n        index,\n        isReversed,\n        collapsedIndices,\n        minSizes,\n        sizes,\n        collapsedSize,\n      });\n      ReactDOM.unstable_batchedUpdates(() => {\n        setMovedSizes(sizes);\n        setSizes(sizes);\n      });\n    },\n    [isReversed, collapsedSize, movedSizes, minSizes, collapsedIndices, setMovedSizes, setSizes]\n  );\n","import React, { useCallback } from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { moveSizes } from '../../helpers';\n\nexport const useUncollapseSize = ({\n  isReversed,\n  movedSizes,\n  minSizes,\n  setMovedSizes,\n  setSizes,\n  collapsedSize,\n  collapsedIndices,\n}: {\n  isReversed: boolean;\n  movedSizes: number[];\n  minSizes: number[];\n  setSizes: React.Dispatch<React.SetStateAction<number[]>>;\n  setMovedSizes: React.Dispatch<React.SetStateAction<number[]>>;\n  collapsedSize: number;\n  collapsedIndices: number[];\n}) =>\n  useCallback(\n    ({ size, idx }: { size: number; idx: number }) => {\n      const offset = isReversed ? -(size - 50) : size - 50;\n      const index = isReversed ? idx - 1 : idx;\n      const newSizes = [...movedSizes];\n      moveSizes({ sizes: newSizes, index, offset, minSizes, collapsedSize, collapsedIndices });\n      ReactDOM.unstable_batchedUpdates(() => {\n        setMovedSizes(newSizes);\n        setSizes(newSizes);\n      });\n    },\n    [collapsedIndices, collapsedSize, isReversed, minSizes, movedSizes, setMovedSizes, setSizes]\n  );\n","import React, { useCallback } from 'react';\nimport { useCollapseSize } from './useCollapseSize';\nimport { useUncollapseSize } from './useUncollapseSize';\nimport { SplitPaneHooks } from '../..';\nimport { Nullable } from '../../../../types/utilities';\n\nexport const useUpdateCollapsedSizes = ({\n  movedSizes,\n  setCollapsedSizes,\n  collapsedSizes,\n  collapseSize,\n  sizes,\n  hooks,\n  unCollapseSize,\n}: {\n  movedSizes: number[];\n  collapsedSizes: Nullable<number>[];\n  sizes: number[];\n  collapseSize: ReturnType<typeof useCollapseSize>;\n  unCollapseSize: ReturnType<typeof useUncollapseSize>;\n  setCollapsedSizes: React.Dispatch<React.SetStateAction<Nullable<number>[]>>;\n  hooks?: SplitPaneHooks;\n}) =>\n  useCallback(\n    (indices: number[]) => {\n      setCollapsedSizes(\n        collapsedSizes.map((size, idx) => {\n          const isCollapsed = indices.includes(idx);\n          if (isCollapsed && size === null) {\n            collapseSize({ size: sizes[idx], idx });\n            hooks?.onChange?.(sizes);\n            return movedSizes[idx]; // when collapsed store current size\n          }\n          if (!isCollapsed && size !== null) {\n            unCollapseSize({ idx, size }); // when un-collapsed clear size\n            hooks?.onChange?.(sizes);\n            return null;\n          }\n          return size;\n        })\n      );\n    },\n    [collapseSize, collapsedSizes, hooks, movedSizes, setCollapsedSizes, sizes, unCollapseSize]\n  );\n","import { useMemo } from 'react';\nimport { CollapseOptions } from '../../index';\nexport const DEFAULT_COLLAPSE_SIZE = 50;\n\nexport const useCollapsedSize = ({ collapseOptions }: { collapseOptions?: CollapseOptions }) =>\n  useMemo(() => collapseOptions?.collapsedSize ?? DEFAULT_COLLAPSE_SIZE, [collapseOptions]);\n","import { addArray } from '../../helpers';\nimport React, { useCallback } from 'react';\n\nexport const useRecalculateSizes = ({\n  getCurrentPaneSizes,\n  collapsedSize,\n  collapsedIndices,\n  setMovedSizes,\n  setSizes,\n}: {\n  getCurrentPaneSizes: () => number[];\n  collapsedIndices: number[];\n  collapsedSize: number;\n  originalMinSizes: number | number[] | undefined;\n  minSizes: number[];\n  setMovedSizes: React.Dispatch<React.SetStateAction<number[]>>;\n  setSizes: React.Dispatch<React.SetStateAction<number[]>>;\n}) =>\n  useCallback(\n    (initialSizes?: number[]) => {\n      const curSizes = getCurrentPaneSizes();\n      const ratio =\n        initialSizes && initialSizes.length > 0 ? addArray(curSizes) / addArray(initialSizes) : 1;\n      const initialRatioSizes = initialSizes ? initialSizes.map(size => size * ratio) : curSizes;\n      const adjustedSizes = initialRatioSizes.map((size, idx) => {\n        if (collapsedIndices.includes(idx)) {\n          return collapsedSize;\n        }\n        if (collapsedIndices.includes(idx - 1)) {\n          const totalPrevSizeToAdd = addArray(\n            collapsedIndices\n              .filter((_collapsedIdx, index) => index <= idx)\n              .map((_i, index) => initialRatioSizes[index] - collapsedSize)\n          );\n          return size + totalPrevSizeToAdd;\n        }\n        return size;\n      });\n      setMovedSizes(adjustedSizes);\n      setSizes(adjustedSizes);\n    },\n    [collapsedIndices, collapsedSize, getCurrentPaneSizes, setMovedSizes, setSizes]\n  );\n","import * as React from 'react';\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { SplitPaneProps, CollapseOptions } from '..';\r\nimport { useDragState, BeginDragCallback } from './effects/useDragState';\r\nimport { useMinSizes } from './memos/useMinSizes';\r\nimport { useGetMovedSizes } from './callbacks/useGetMovedSizes';\r\nimport { useIsCollapseReversed } from './memos/useIsCollapseReversed';\r\nimport { useHandleDragFinished } from './callbacks/useHandleDragFinished';\r\nimport { useHandleDragStart } from './callbacks/useHandleDragStart';\r\nimport { useChildPanes } from './memos/useChildPanes';\r\nimport { useGetCurrentPaneSizes } from './callbacks/useGetCurrentPaneSizes';\r\nimport { useCollapseSize } from './callbacks/useCollapseSize';\r\nimport { useUncollapseSize } from './callbacks/useUncollapseSize';\r\nimport { useUpdateCollapsedSizes } from './callbacks/useUpdateCollapsedSizes';\r\nimport { useCollapsedSize } from './memos/useCollapsedSize';\r\nimport { debounce } from '../helpers';\r\nimport { useRecalculateSizes } from './callbacks/useRecalculateSizes';\r\nimport { useEventListener } from '../../../hooks/useEventListener';\r\nimport { Nullable } from '../../../types/utilities';\r\n\r\nexport interface ChildPane {\r\n  node: React.ReactChild;\r\n  ref: React.RefObject<HTMLDivElement>;\r\n  key: string;\r\n  size: number;\r\n}\r\ninterface SplitPaneResizeReturns {\r\n  childPanes: ChildPane[];\r\n  resizingIndex: Nullable<number>;\r\n  handleDragStart: BeginDragCallback;\r\n}\r\n\r\ninterface SplitPaneResizeOptions\r\n  extends Pick<SplitPaneProps, 'split' | 'initialSizes' | 'hooks' | 'collapsedSizes' | 'minSizes'> {\r\n  collapsedIndices: number[];\r\n  isLtr: boolean;\r\n  collapseOptions?: CollapseOptions;\r\n  children: React.ReactChild[];\r\n  isVertical: boolean;\r\n}\r\n\r\n/**\r\n * Manages the dragging, size calculation, collapse calculation, and general state management of the panes.  It propogates the results of its complex calculations into the `childPanes` which are used by the rest of the \"dumb\" react components that just take all of them and render them\r\n */\r\nexport const useSplitPaneResize = (options: SplitPaneResizeOptions): SplitPaneResizeReturns => {\r\n  const {\r\n    children: originalChildren,\r\n    split,\r\n    initialSizes: originalDefaults,\r\n    minSizes: originalMinSizes,\r\n    hooks,\r\n    collapsedIndices,\r\n    collapsedSizes: originalCollapsedSizes,\r\n    collapseOptions,\r\n    isVertical,\r\n    isLtr,\r\n  } = options;\r\n\r\n  const children = !Array.isArray(originalChildren) ? [originalChildren] : originalChildren;\r\n  // VALUES: const values used throughout the different logic\r\n  const paneRefs = useRef(new Map<string, React.RefObject<HTMLDivElement>>());\r\n\r\n  const minSizes = useMinSizes({\r\n    minSizes: originalMinSizes,\r\n    numSizes: children.length,\r\n    collapseOptions,\r\n    collapsedIndices,\r\n  });\r\n  const collapsedSize = useCollapsedSize({ collapseOptions });\r\n  const childPanes = useChildPanes({ minSizes, children, paneRefs });\r\n  const isReversed = useIsCollapseReversed(collapseOptions);\r\n  const initialSizes = useMemo(() => children.map((_c, idx) => originalDefaults?.[idx] ?? 1), [\r\n    children,\r\n    originalDefaults,\r\n  ]);\r\n\r\n  // STATE: a map keeping track of all of the pane sizes\r\n  const [sizes, setSizes] = useState<number[]>(initialSizes);\r\n  const [movedSizes, setMovedSizes] = useState<number[]>(sizes);\r\n  const [collapsedSizes, setCollapsedSizes] = useState<Nullable<number>[]>(\r\n    originalCollapsedSizes ?? new Array(children.length).fill(null)\r\n  );\r\n  // CALLBACKS  callback functions used throughout. all functions are memoized by useCallback\r\n  const getMovedSizes = useGetMovedSizes({\r\n    minSizes,\r\n    sizes,\r\n    isLtr,\r\n    collapsedSize,\r\n    collapsedIndices,\r\n    isReversed,\r\n  });\r\n  const getCurrentPaneSizes = useGetCurrentPaneSizes({ childPanes, split });\r\n  const handleDragFinished = useHandleDragFinished({ movedSizes, children, hooks, setSizes });\r\n  const recalculateSizes = useRecalculateSizes({\r\n    setMovedSizes,\r\n    minSizes,\r\n    collapsedIndices,\r\n    collapsedSize,\r\n    getCurrentPaneSizes,\r\n    setSizes,\r\n    originalMinSizes,\r\n  });\r\n\r\n  // STATE: if dragging, contains which pane is dragging and what the offset is.  If not dragging then null\r\n  const { dragState, beginDrag } = useDragState(isVertical, handleDragFinished);\r\n\r\n  const collapseSize = useCollapseSize({\r\n    setMovedSizes,\r\n    setSizes,\r\n    minSizes,\r\n    movedSizes,\r\n    isReversed,\r\n    collapsedIndices,\r\n    collapsedSize,\r\n  });\r\n  const unCollapseSize = useUncollapseSize({\r\n    isReversed,\r\n    movedSizes,\r\n    minSizes,\r\n    setMovedSizes,\r\n    setSizes,\r\n    collapsedSize,\r\n    collapsedIndices,\r\n  });\r\n  const updateCollapsedSizes = useUpdateCollapsedSizes({\r\n    sizes,\r\n    collapsedSizes,\r\n    setCollapsedSizes,\r\n    movedSizes,\r\n    collapseSize,\r\n    unCollapseSize,\r\n    hooks,\r\n  });\r\n\r\n  // EFFECTS: manage updates and calculations based on dependency changes for states that are interacted with by multiple functions\r\n  useEffect(() => {\r\n    if (dragState !== null) setMovedSizes(getMovedSizes(dragState));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dragState]);\r\n  useEffect(() => {\r\n    if (dragState !== null) hooks?.onChange?.(movedSizes);\r\n  }, [dragState, movedSizes, hooks]);\r\n  useEffect(() => {\r\n    hooks?.onCollapse?.(collapsedSizes);\r\n  }, [collapsedSizes, hooks]);\r\n  useEffect(() => {\r\n    updateCollapsedSizes(collapsedIndices);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [collapsedIndices]);\r\n  // recalculate initial sizes on window size change to maintain min sizes\r\n\r\n  const resetSizes = useCallback(\r\n    debounce(() => recalculateSizes(), 100),\r\n    [recalculateSizes]\r\n  );\r\n  useEventListener('resize', resetSizes);\r\n  useEffect(\r\n    () => recalculateSizes(initialSizes),\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n  //populates the sizes of all the initially populated childPanes, adjust sizes based on collapsed state\r\n  const childPanesWithSizes: ChildPane[] = useMemo(\r\n    () =>\r\n      childPanes.map((child, index) => {\r\n        return { ...child, size: movedSizes[index] };\r\n      }),\r\n    [childPanes, movedSizes]\r\n  );\r\n\r\n  const handleDragStart = useHandleDragStart({ isReversed, hooks, beginDrag });\r\n  return {\r\n    childPanes: childPanesWithSizes,\r\n    resizingIndex: dragState?.index ?? null,\r\n    handleDragStart,\r\n  };\r\n};\r\n","import React, { useCallback } from 'react';\n\nexport const useToggleCollapse = ({\n  collapsedIndices,\n  setCollapsed,\n}: {\n  collapsedIndices: number[];\n  setCollapsed: React.Dispatch<React.SetStateAction<number[]>>;\n}) =>\n  useCallback(\n    (index: number) => {\n      collapsedIndices.includes(index)\n        ? setCollapsed(collapsedIndices.filter(i => i !== index))\n        : setCollapsed([...collapsedIndices, index]);\n    },\n    [collapsedIndices, setCollapsed]\n  );\n","import { useCallback } from 'react';\n\nexport const useGetIsPaneCollapsed = ({ collapsedIndices }: { collapsedIndices: number[] }) =>\n  useCallback(\n    (paneIndex: number) =>\n      collapsedIndices.length > 0 ? collapsedIndices.includes(paneIndex) : false,\n    [collapsedIndices]\n  );\n","import { useMemo } from 'react';\r\nimport { Direction, SplitType } from '../../index';\r\n\r\nexport const useIsLtr = ({ split, dir }: { dir?: Direction; split: SplitType }) =>\r\n  useMemo(() => (split === 'vertical' ? dir !== 'rtl' : true), [split, dir]);\r\n","import { useMemo } from 'react';\r\nimport { SplitPaneProps } from '../../index';\r\n\r\nexport const useCollapsedSizes = ({\r\n  collapsedSizes,\r\n  children,\r\n  collapse,\r\n}: Pick<SplitPaneProps, 'collapsedSizes' | 'children' | 'collapse'>) =>\r\n  useMemo(\r\n    () =>\r\n      collapsedSizes?.length === children.length && !!collapse\r\n        ? collapsedSizes\r\n        : new Array(children.length).fill(null),\r\n    [children.length, collapse, collapsedSizes]\r\n  );\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Button = styled.div`\r\n  width: 1.8rem;\r\n  height: 1.8rem;\r\n  border-radius: 300px;\r\n  background: #0092d1;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  text-align: center;\r\n  color: white;\r\n  border: 2px rgba(200, 200, 200, 0.5) solid;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  svg {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n`;\r\n\r\nenum Direction {\r\n  left,\r\n  right,\r\n  up,\r\n  down,\r\n}\r\n\r\nconst paths: { [key in Direction]: string } = {\r\n  [Direction.left]: 'M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z',\r\n  [Direction.right]: 'M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z',\r\n  [Direction.up]: 'M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z',\r\n  [Direction.down]: 'M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z',\r\n};\r\n\r\ninterface IconProps extends React.SVGProps<SVGSVGElement> {\r\n  dir: Direction;\r\n}\r\n\r\nconst Icon: React.FC<IconProps> = props => (\r\n  <svg {...props} focusable=\"false\" fill=\"white\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\r\n    <path d={paths[props.dir]} />\r\n  </svg>\r\n);\r\n\r\ninterface CollapseButtonProps {\r\n  isLtr: boolean;\r\n  isVertical: boolean;\r\n  isBefore: boolean;\r\n  isReversed: boolean;\r\n}\r\nexport const CollapseButton: React.FC<CollapseButtonProps> = props => {\r\n  const dirs: Direction[] = props.isVertical\r\n    ? [Direction.left, Direction.right]\r\n    : [Direction.up, Direction.down];\r\n  const [a, b] = props.isReversed ? dirs.reverse() : dirs;\r\n  const dir: Direction = props.isBefore ? (props.isLtr ? a : b) : props.isLtr ? b : a;\r\n  return (\r\n    <Button>\r\n      <Icon dir={dir} />\r\n    </Button>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { CollapseOptions } from '../../index';\r\nimport { CollapseButton } from '../../../CollapseButton';\r\n\r\nconst getDefault = (props: {\r\n  isVertical: boolean;\r\n  isLtr: boolean;\r\n  isReversed: boolean;\r\n}): CollapseOptions => ({\r\n  beforeToggleButton: <CollapseButton {...props} isBefore={true} />,\r\n  afterToggleButton: <CollapseButton {...props} isBefore={false} />,\r\n  collapseDirection: props.isVertical ? 'left' : 'up',\r\n  overlayCss: { backgroundColor: 'rgba(0, 0, 0, 0.4)' },\r\n  buttonTransitionTimeout: 200,\r\n  buttonTransition: 'grow',\r\n  collapsedSize: 50,\r\n  collapseTransitionTimeout: 500,\r\n  buttonPositionOffset: 0,\r\n});\r\n\r\n/**\r\n * function that returns a set of valid collapseOptions from uncertain input.\r\n */\r\nexport const useCollapseOptions = ({\r\n  originalValue,\r\n  ...orientationDetails\r\n}: {\r\n  originalValue: Partial<CollapseOptions> | undefined | boolean;\r\n  isVertical: boolean;\r\n  isLtr: boolean;\r\n  isReversed: boolean;\r\n}): Required<CollapseOptions> | undefined => {\r\n  if (originalValue === undefined || originalValue === false) return undefined;\r\n  if (originalValue === true) return getDefault(orientationDetails);\r\n  return { ...getDefault(orientationDetails), ...originalValue };\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Pane } from '../Pane';\r\nimport { Resizer } from '../Resizer';\r\nimport { useSplitPaneResize } from './hooks/useSplitPaneResize';\r\nimport { convertCollapseSizesToIndices, getMinSize, Wrapper } from './helpers';\r\nimport { useMergeClasses } from '../../hooks/useMergeClasses';\r\nimport { useIsCollapseReversed } from './hooks/memos/useIsCollapseReversed';\r\nimport { useToggleCollapse } from './hooks/callbacks/useToggleCollapse';\r\nimport { useGetIsPaneCollapsed } from './hooks/callbacks/useGetIsCollapsed';\r\nimport { useIsLtr } from './hooks/memos/useIsLtr';\r\nimport { useCollapsedSizes } from './hooks/memos/useCollapsedSizes';\r\nimport { Nullable } from '../../types/utilities';\r\nimport { useCollapseOptions } from './hooks/memos/useCollapseOptions';\r\n\r\n// String Unions\r\nexport type SplitType = 'horizontal' | 'vertical';\r\nexport type Direction = 'ltr' | 'rtl';\r\nexport type TransitionType = 'fade' | 'grow' | 'zoom' | 'none';\r\nexport type CollapseDirection = 'left' | 'right' | 'up' | 'down';\r\n\r\nexport type SplitPaneHooks = {\r\n  onDragStarted?: () => void;\r\n  onChange?: (sizes: number[]) => void;\r\n  onSaveSizes?: (sizes: number[]) => void;\r\n  onCollapse?: (collapsedSizes: Nullable<number>[]) => void;\r\n};\r\nexport interface CollapseOptions {\r\n  beforeToggleButton: React.ReactElement;\r\n  afterToggleButton: React.ReactElement;\r\n  buttonTransition: TransitionType;\r\n  buttonTransitionTimeout: number;\r\n  buttonPositionOffset: number;\r\n  collapseDirection: CollapseDirection;\r\n  collapseTransitionTimeout: number;\r\n  collapsedSize: number;\r\n  overlayCss: React.CSSProperties;\r\n}\r\nexport interface ResizerOptions {\r\n  css?: React.CSSProperties;\r\n  hoverCss?: React.CSSProperties;\r\n  grabberSize?: number | string;\r\n}\r\n\r\nexport interface SplitPaneProps {\r\n  split: SplitType;\r\n  collapse?: boolean | Partial<CollapseOptions>;\r\n\r\n  dir?: Direction;\r\n  className?: string;\r\n\r\n  initialSizes?: number[];\r\n  minSizes?: number | number[];\r\n  collapsedSizes?: Nullable<number>[];\r\n\r\n  hooks?: SplitPaneHooks;\r\n  resizerOptions?: ResizerOptions;\r\n\r\n  children: React.ReactChild[];\r\n}\r\n\r\nexport const SplitPane: React.FC<SplitPaneProps> = props => {\r\n  const collapsedSizes = useCollapsedSizes(props);\r\n  const isLtr = useIsLtr(props);\r\n  const isVertical = props.split === 'vertical';\r\n  const isReversed = useIsCollapseReversed(props.collapse);\r\n\r\n  const collapseOptions = useCollapseOptions({\r\n    isVertical,\r\n    isLtr,\r\n    originalValue: props.collapse,\r\n    isReversed,\r\n  });\r\n\r\n  const [collapsedIndices, setCollapsed] = useState<number[]>(\r\n    convertCollapseSizesToIndices(collapsedSizes)\r\n  );\r\n\r\n  const { childPanes, handleDragStart, resizingIndex } = useSplitPaneResize({\r\n    ...props,\r\n    isLtr,\r\n    isVertical,\r\n    collapsedIndices,\r\n    collapsedSizes,\r\n    collapseOptions,\r\n  });\r\n\r\n  const splitPaneClass = useMergeClasses(['SplitPane', props.split, props.className]);\r\n  const resizingClass = useMergeClasses(['Resizing', props.className]);\r\n\r\n  const toggleCollapse = useToggleCollapse({ setCollapsed, collapsedIndices });\r\n  const getIsPaneCollapsed = useGetIsPaneCollapsed({ collapsedIndices });\r\n\r\n  if (childPanes.length <= 1) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.error(\r\n        '[react-collapse-pane] - You must have more than one non-null child inside the SplitPane component.  Even though SplitPane does not crash, you should resolve this error.'\r\n      );\r\n    }\r\n    return <>{props.children}</>;\r\n  }\r\n\r\n  // stacks the children and places a resizer in between each of them. Each resizer has the same index as the pane that it controls.\r\n  const entries = childPanes.map((pane, paneIndex) => {\r\n    const resizerPaneIndex = isReversed ? paneIndex : paneIndex - 1;\r\n    return (\r\n      <React.Fragment key={paneIndex}>\r\n        {paneIndex - 1 >= 0 ? (\r\n          <Resizer\r\n            key={`resizer.${resizerPaneIndex}`}\r\n            isCollapsed={getIsPaneCollapsed(resizerPaneIndex)}\r\n            isVertical={isVertical}\r\n            isLtr={isLtr}\r\n            split={props.split}\r\n            className={resizingIndex === resizerPaneIndex ? resizingClass : props.className}\r\n            paneIndex={resizerPaneIndex}\r\n            resizerOptions={props.resizerOptions}\r\n            collapseOptions={collapseOptions}\r\n            onDragStarted={handleDragStart}\r\n            onCollapseToggle={toggleCollapse}\r\n          />\r\n        ) : null}\r\n        <Pane\r\n          key={`pane.${paneIndex}`}\r\n          forwardRef={pane.ref}\r\n          size={pane.size}\r\n          isCollapsed={getIsPaneCollapsed(paneIndex)}\r\n          collapsedIndices={collapsedIndices}\r\n          split={props.split}\r\n          isVertical={isVertical}\r\n          minSize={getMinSize(paneIndex, props.minSizes)}\r\n          className={props.className}\r\n          transitionTimeout={collapseOptions?.collapseTransitionTimeout}\r\n          collapseOverlayCss={collapseOptions?.overlayCss}\r\n        >\r\n          {pane.node}\r\n        </Pane>\r\n      </React.Fragment>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <Wrapper key=\"splitpanewrapper\" className={splitPaneClass} split={props.split}>\r\n      {entries}\r\n    </Wrapper>\r\n  );\r\n};\r\nSplitPane.displayName = 'SplitPane';\r\n"],"names":["useMergeClasses","classes","useMemo","filter","c","join","DEFAULT_COLLAPSE_TRANSITION_TIMEOUT","verticalCss","css","horizontalCss","coverCss","PaneRoot","styled","div","props","$isVertical","$shouldAnimate","$timeout","WidthPreserver","$isCollapsed","CollapseOverlay","UnMemoizedPane","size","minSize","isCollapsed","collapseOverlayCss","background","isVertical","split","className","children","forwardRef","collapsedIndices","transitionTimeout","timeout","useState","shouldAnimate","setShouldAnimate","didMount","useRef","useEffect","current","setTimeout","minStyle","minWidth","minHeight","widthPreserverStyle","userSelect","React","ref","style","flexBasis","displayName","Pane","topBottomCss","leftRightCss","ButtonWrapper","ButtonContainer","$grabberSize","ResizeGrabber","$isLtr","ResizePresentation","getSizeWithUnit","isNaN","toString","transitionComponentMap","fade","Fade","grow","Grow","zoom","Zoom","none","useTransition","collapseOptions","buttonTransition","DEFAULT_MIN_SIZE","getMinSize","index","minSizes","Array","value","getRefSize","sizeAttr","getBoundingClientRect","moveSizes","offset","sizes","collapsedSize","length","idx","includes","firstMinSize","secondMinSize","firstSize","secondSize","missing","pushedOffset","moveCollapsedSiblings","isReversed","i","Wrapper","convertCollapseSizesToIndices","reduce","prev","cur","addArray","arr","debounce","func","waitFor","debounced","args","clearTimeout","defaultResizerOptions","grabberSize","backgroundColor","hoverCss","Resizer","paneIndex","onDragStarted","resizerOptions","onCollapseToggle","isLtr","grabberSizeWithUnit","Transition","isHovered","setIsHovered","handleMouseDown","useCallback","event","preventDefault","position","handleTouchStart","touches","handleButtonClick","stopPropagation","handleButtonMousedown","debouncedSetHovered","handleMouseEnterGrabber","debouncedSetNotHovered","handleMouseLeaveGrabber","getWidthOrHeight","width","height","preButtonFlex","Math","max","buttonPositionOffset","postButtonFlex","isTransition","collapseButton","flex","buttonTransitionTimeout","onClick","onMouseDown","afterToggleButton","beforeToggleButton","key","role","onTouchStart","onMouseEnter","onMouseLeave","useEventListener","type","listener","abortController","AbortController","window","addEventListener","removeEventListener","abort","useDragStateHandlers","onDragFinished","isDragging","setIsDragging","dragStartPos","setDragStartPos","currentPos","setCurrentPos","draggingIndex","setDraggingIndex","beginDrag","pos","clientX","clientY","ReactDOM","dragState","onMouseUp","onMouseMove","onTouchMove","isPrimaryPressed","buttons","useDragState","useMinSizes","numSizes","from","map","_child","useGetMovedSizes","originalSizes","isCollapseDirectionReversed","collapseDirection","useIsCollapseReversed","useHandleDragFinished","setSizes","hooks","movedSizes","onSaveSizes","useHandleDragStart","useChildPanes","paneRefs","childPanes","prevPaneRefs","Map","node","get","set","useGetCurrentPaneSizes","useCollapseSize","setMovedSizes","useUncollapseSize","newSizes","useUpdateCollapsedSizes","setCollapsedSizes","collapsedSizes","collapseSize","unCollapseSize","indices","onChange","DEFAULT_COLLAPSE_SIZE","useCollapsedSize","useRecalculateSizes","getCurrentPaneSizes","initialSizes","curSizes","ratio","initialRatioSizes","adjustedSizes","totalPrevSizeToAdd","_collapsedIdx","_i","useSplitPaneResize","options","originalChildren","originalDefaults","originalMinSizes","originalCollapsedSizes","isArray","_c","fill","getMovedSizes","handleDragFinished","recalculateSizes","updateCollapsedSizes","onCollapse","resetSizes","childPanesWithSizes","child","handleDragStart","resizingIndex","useToggleCollapse","setCollapsed","useGetIsPaneCollapsed","useIsLtr","dir","useCollapsedSizes","collapse","Button","Direction","paths","left","right","up","down","Icon","focusable","viewBox","d","CollapseButton","dirs","reverse","a","b","isBefore","getDefault","overlayCss","collapseTransitionTimeout","useCollapseOptions","originalValue","orientationDetails","undefined","SplitPane","splitPaneClass","resizingClass","toggleCollapse","getIsPaneCollapsed","console","error","entries","pane","resizerPaneIndex","Fragment"],"mappings":"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"}